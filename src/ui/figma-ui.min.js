function createIconInputs() {
  let e = document.getElementsByClassName("input-icon__input");
  for (let t = 0; t < e.length; ++t) {
    let n = e[t];
    n.addEventListener("focus", e => {
      inputIconFocusIn(n);
    }),
      n.addEventListener("focusout", e => {
        inputIconFocusOut(n);
      });
  }
}
function inputIconFocusIn(e) {
  let t = e.parentNode,
    n = findFirstChildByClass(t, "icon");
  n.classList.remove("icon--black-3"), n.classList.add("icon--blue");
}
function inputIconFocusOut(e) {
  let t = e.parentNode,
    n = findFirstChildByClass(t, "icon");
  n.classList.add("icon--black-3"), n.classList.remove("icon--blue");
}
function createSelect() {
  function e(e) {
    if ("" != e.value) {
      let t = document.createElement("li"),
        l = e.value,
        d = document.createTextNode(e.text);
      (t.className = "select-dropdown__list-item"),
        t.setAttribute("data-value", l),
        t.appendChild(d),
        o.appendChild(t),
        t.addEventListener(
          "click",
          function() {
            n(this, t.parentNode);
          },
          !1
        );
    }
  }
  function t(e, t, n, l) {
    e.parentNode.insertBefore(t, e),
      t.appendChild(e),
      document.addEventListener("click", function(e) {
        let n = t.contains(e.target);
        if (!n) {
          let e = t.getElementsByClassName("select-dropdown__list");
          e[0].classList.remove("active");
          let n = t.getElementsByTagName("button");
          n[0].classList.remove("select-dropdown__button--active");
        }
      });
    let a = document.createElement("button"),
      s = document.createElement("span");
    (spanText = d ? document.createTextNode(d) : document.createTextNode(l)),
      (iElement = document.createElement("i")),
      (o = document.createElement("ul")),
      (t.className = "select-dropdown select-dropdown--" + n),
      (a.className = "select-dropdown__button select-dropdown__button--" + n),
      a.setAttribute("data-value", ""),
      (iElement.className = "chevron-down"),
      (o.className = "select-dropdown__list select-dropdown__list--" + n),
      (o.id = "select-dropdown__list-" + n),
      t.appendChild(a),
      s.appendChild(spanText),
      a.appendChild(s),
      a.appendChild(iElement),
      t.appendChild(o);
  }
  function n(e, t) {
    if ("BUTTON" == e.tagName) {
      e.classList.add("select-dropdown__button--active"),
        (selectDropdown = e.parentNode.getElementsByTagName("ul"));
      for (let e = 0; e < selectDropdown.length; e++)
        selectDropdown[0].classList.toggle("active");
    } else if ("LI" == e.tagName) {
      let n = t.querySelectorAll("li");
      for (let e = 0; e < n.length; e++)
        n[e].classList.remove("select-dropdown__list-item--selected");
      let o = e.parentNode.parentNode.getElementsByTagName("button");
      o[0].classList.remove("select-dropdown__button--active");
      let d = e.parentNode.parentNode.getElementsByTagName("select")[0];
      l(d.id, e.getAttribute("data-value")),
        (elementParentSpan = e.parentNode.parentNode.getElementsByTagName(
          "span"
        )),
        e.classList.add("select-dropdown__list-item--selected"),
        e.parentNode.classList.toggle("active"),
        (elementParentSpan[0].textContent = e.textContent),
        elementParentSpan[0].parentNode.setAttribute(
          "data-value",
          e.getAttribute("data-value")
        );
      let a = e.getAttribute("data-pos");
      e.parentNode.style.top = a + "px";
    }
  }
  function l(e, t) {
    let n = document.getElementById(e);
    (n.value = t), n.setAttribute("selected", "selected");
  }
  let o,
    d,
    a,
    s = document.getElementsByTagName("select");
  for (let n = 0; n < s.length; n++) {
    (a = s[n].value),
      (d = s[n].options[s[n].selectedIndex].text),
      (s[n].style.display = "none"),
      t(
        document.getElementById(s[n].id),
        document.createElement("div"),
        n,
        s[n].getAttribute("placeholder-text")
      );
    let l = s[n].getElementsByTagName("optgroup");
    if (0 != l.length)
      for (let t = 0; t < l.length; t++) {
        let n = l[t].getElementsByTagName("option");
        for (let t = 0; t < n.length; t++) e(n[t]);
        t != l.length - 1 &&
          ((dividerElement = document.createElement("div")),
          (lineElement = document.createElement("span")),
          (dividerElement.className = "select-dropdown__divider"),
          (lineElement.className = "select-dropdown__line"),
          o.appendChild(dividerElement),
          dividerElement.appendChild(lineElement),
          dividerElement.addEventListener(
            "click",
            function(e) {
              e.stopPropagation();
            },
            !1
          ));
      }
    else for (let t = 0; t < s[n].options.length; t++) e(s[n].options[t]);
  }
  let i = document.getElementsByClassName("select-dropdown__button");
  for (let e = 0; e < i.length; e++)
    i[e].addEventListener(
      "click",
      function() {
        n(this);
      },
      !1
    );
}
function findFirstChildByClass(e, t) {
  function n(e, t, o) {
    for (let d = 0; d < e.childNodes.length && !o; d++) {
      let a = e.childNodes[d],
        s = null != a.className ? a.className.split(" ") : [];
      for (let n = 0, a = s.length; n < a; n++)
        if (s[n] == t) {
          (o = !0), (l = e.childNodes[d]);
          break;
        }
      if (o) break;
      n(e.childNodes[d], t, o);
    }
  }
  let l = null;
  return n(e, t, !1), l;
}
document.addEventListener("DOMContentLoaded", e => {
  createIconInputs(), createSelect();
});
